# 🏆 比赛场景说明

## 📋 场景概述

根据比赛要求，我们的系统现在使用**两个交叉路口**的场景：
- **一个十字路口** (J_cross)
- **一个T型路口** (J_t)

## 🗺️ 路网结构

### 🚦 十字路口 (J_cross)
位置：(200, 200)
- **东西方向**: E1 ↔ E2 (双向两车道)
- **南北方向**: E3 ↔ E4 (双向两车道)
- **信号控制**: 4相位控制
  - 相位1: 东西直行 (30秒)
  - 相位2: 东西左转 (15秒)
  - 相位3: 南北直行 (30秒)
  - 相位4: 南北左转 (15秒)
- **🔄 右转规则**: 所有方向右转不受信号灯控制，可随时通行
  - 西→南右转: ✅ 无条件通行
  - 南→东右转: ✅ 无条件通行
  - 东→北右转: ✅ 无条件通行
  - 北→西右转: ✅ 无条件通行

### 🚦 T型路口 (J_t)
位置：(200, 400)
- **东西方向**: E5 ↔ E6 (双向两车道)
- **南方向**: E4 (连接十字路口)
- **信号控制**: 3相位控制
  - 相位1: 东西直行 (35秒)
  - 相位2: 左转 (20秒)
  - 相位3: 南北直行 (35秒)
- **🔄 右转规则**: 所有方向右转不受信号灯控制，可随时通行
  - 南→东右转: ✅ 无条件通行
  - 西→南右转: ✅ 无条件通行

### 🛣️ 道路连接
```
    J4 ——— E5 ——— J_t ——— E6 ——— J5
                   |
                   E4
                   |
J1 ——— E1 ——— J_cross ——— E2 ——— J2
                   |
                   E3
                   |
                   J3
```

## 🚗 车流特点

### 📈 高峰时段 (0-1800秒)
- **主要车流**: 东西方向 750-800 车/小时
- **次要车流**: 南北方向 600-650 车/小时
- **左转车流**: 150-200 车/小时
- **🔄 右转车流**: 100-150 车/小时（无信号灯限制，随时通行）
- **T型路口**: 380-400 车/小时

### 📊 平峰时段 (1800-3600秒)
- **主要车流**: 减少50%
- **保持基本通行需求**

### 🚛 特殊车辆
- **货车**: 45-50 车/小时
- **公交车**: 30-35 车/小时
- **随机车流**: 增加场景复杂性

## 🎯 比赛评估指标

### 📊 核心指标
1. **平均车辆状态** (30%权重)
   - 位于交叉口内各车道上的平均车辆数量
   - 越低越好

2. **平均车辆密度** (30%权重)
   - 位于交叉口内各车道上所有车辆的平均密度
   - 越低越好

3. **平均车速** (40%权重)
   - 位于交叉口各出口车道上所有车辆的平均车速
   - 越高越好

### 🏆 评分标准
- **🥇 优秀** (85+分): 一等奖水平
- **🥈 良好** (75-84分): 二等奖水平
- **🥉 不错** (65-74分): 三等奖水平
- **📈 一般** (50-64分): 需要优化
- **❌ 较差** (<50分): 需要重新设计

## 🔧 技术挑战

### 🎯 控制难点
1. **两路口协调**: 十字路口和T型路口的协同控制
2. **车流不均**: 不同方向车流量差异较大
3. **相位优化**: 两个路口的相位时长需要智能调整
4. **动态适应**: 高峰/平峰时段的动态调整

### 🚀 AI优势
- **多智能体**: 两个路口独立但协调的AI控制
- **实时感知**: 25维观测空间，全面感知交通状态
- **智能决策**: 8组件奖励函数，平衡多个目标
- **学习能力**: 通过强化学习不断优化策略

## 📁 场景文件

### 🗂️ 文件结构
```
scenarios/competition/
├── network.net.xml      # 路网定义
├── routes.rou.xml       # 车流路由
├── config.sumocfg       # 仿真配置
├── additional.xml       # 检测器配置
└── gui_settings.cfg     # 可视化设置
```

### 🔧 配置特点
- **仿真时长**: 3600秒 (1小时)
- **检测器**: 每个车道都有流量和队列检测器
- **车辆类型**: 小汽车、货车、公交车
- **随机种子**: 固定为42，确保结果可重复

## 🎮 使用方法

### 🚀 快速开始
```bash
python start_local.py
# 选择 3. 🏆 比赛模式训练
```

### 🔧 命令行使用
```bash
python train_local.py --scenario competition --timesteps 500000 --gui
```

### 📊 测试模型
```bash
python start_local.py
# 选择 4. 🧪 测试已训练的模型
```

## 💡 优化建议

### 🎯 针对比赛场景
1. **协调控制**: 重点优化两路口间的协调
2. **相位调优**: 根据车流特点调整相位时长
3. **动态适应**: 训练AI适应不同时段的车流变化
4. **指标平衡**: 平衡车速、密度、车辆数三个指标

### 🏆 冲奖策略
1. **长时间训练**: 使用500,000步充分训练
2. **多次尝试**: 训练多个模型，选择最佳
3. **参数调优**: 系统性调整学习率等参数
4. **效果验证**: 多次测试确保稳定性

## 📈 预期效果

基于升级的AI架构和专门的比赛场景，预期实现：
- **通行效率**: 提升30-40%
- **等待时间**: 降低35-45%
- **拥堵减少**: 降低50%以上
- **比赛得分**: 目标85+分，冲击一等奖

---

**现在开始训练，冲击15万元奖金池！** 🏆💰
